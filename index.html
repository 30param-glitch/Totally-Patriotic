<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Totally Patriotic</title>

<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">

<style>
* { box-sizing: border-box; margin:0; padding:0; font-family:'Roboto', sans-serif; }
body{
  background:linear-gradient(to bottom,#b22234 0%,#b22234 50%,#1e3a8a 50%,#1e3a8a 100%);
  color:white;
  min-height:100vh;
  display:flex;
}
.sidebar{
  width:200px;
  background:#1e3a8a;
  padding:20px;
  display:flex;
  flex-direction:column;
  gap:15px;
}
.sidebar button{
  padding:12px;
  font-weight:bold;
  border:none;
  border-radius:8px;
  cursor:pointer;
  background:#3b82f6;
  color:#fff;
  transition:background 0.3s;
}
.sidebar button:hover{ background:#2563eb; }
.main{
  flex:1;
  padding:20px;
  max-width:900px;
  margin:auto;
}
header{
  text-align:center;
  padding:40px 20px;
  font-size:48px;
  font-weight:700;
  letter-spacing:2px;
  text-shadow:2px 2px 6px rgba(0,0,0,0.4);
}
.game-card{
  background: rgba(255,255,255,0.05);
  border-radius:12px;
  padding:30px;
  margin-bottom:30px;
  box-shadow:0 4px 12px rgba(0,0,0,0.3);
  text-align:center;
}
#chessboard{
  display:grid;
  grid-template-columns:repeat(8,60px);
  grid-template-rows:repeat(8,60px);
  justify-content:center;
  background:#111;
  border-radius:12px;
  margin-top:20px;
}
.square{
  width:60px;
  height:60px;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:32px;
  cursor:pointer;
}
.light{background:#3b82f6;}
.dark{background:#1e3a8a;}
</style>
</head>

<body>

<div class="sidebar">
  <button onclick="showHome()">Home</button>
  <button onclick="showMath()">Math</button>
</div>

<div class="main">
<header>üá∫üá∏ Totally Patriotic üá∫üá∏</header>

<div id="home" class="game-card game">
  <h2>Welcome!</h2>
  <p>Totally Patriotic provides an all-American experience in learning.</p>
</div>

<div id="math" class="game-card game" style="display:none;">
  <h2>Math & Games</h2>

  <div id="chess" class="game-card">
    <h2>‚ôü Chess vs AI</h2>
    <div class="chess-difficulty">
      <button onclick="setChessDifficulty('easy')">EASY</button>
      <button onclick="setChessDifficulty('medium')">MEDIUM</button>
      <button onclick="setChessDifficulty('hard')">HARD</button>
    </div>
    <div id="chessboard"></div>
    <p id="chessStatus"></p>
  </div>
</div>

</div>

<script>
function showHome(){
  document.querySelectorAll(".game-card.game").forEach(g=>g.style.display="none");
  document.getElementById("home").style.display="block";
}
function showMath(){
  document.querySelectorAll(".game-card.game").forEach(g=>g.style.display="none");
  document.getElementById("math").style.display="block";
}

/* ======================
      CHESS
====================== */
const chessBoard = document.getElementById("chessboard");
const chessStatus = document.getElementById("chessStatus");

let board = [
["r","n","b","q","k","b","n","r"],
["p","p","p","p","p","p","p","p"],
["","","","","","","",""],
["","","","","","","",""],
["","","","","","","",""],
["","","","","","","",""],
["P","P","P","P","P","P","P","P"],
["R","N","B","Q","K","B","N","R"]
];

let selected=null;
let whiteTurn=true;
let aiDifficulty="medium";

const symbols={
r:"‚ôú",n:"‚ôû",b:"‚ôù",q:"‚ôõ",k:"‚ôö",p:"‚ôü",
R:"‚ôñ",N:"‚ôò",B:"‚ôó",Q:"‚ôï",K:"‚ôî",P:"‚ôô"
};

function drawChess(){
  chessBoard.innerHTML="";
  for(let r=0;r<8;r++){
    for(let c=0;c<8;c++){
      let sq=document.createElement("div");
      sq.className="square "+((r+c)%2==0?"light":"dark");
      sq.dataset.row=r;
      sq.dataset.col=c;
      sq.textContent=symbols[board[r][c]]||"";
      sq.onclick=clickChess;
      chessBoard.appendChild(sq);
    }
  }
}

function clickChess(){
  let r=parseInt(this.dataset.row);
  let c=parseInt(this.dataset.col);

  if(!selected){
    if(board[r][c] && board[r][c]===board[r][c].toUpperCase()){
      selected=[r,c];
    }
  }else{
    let [sr,sc]=selected;
    if(isLegalMove(sr,sc,r,c,true)){
      movePiece(sr,sc,r,c);
      whiteTurn=false;
      setTimeout(aiMove,300);
    }else{
      chessStatus.textContent="Illegal move!";
    }
    selected=null;
    drawChess();
  }
}

function movePiece(sr,sc,tr,tc){
  board[tr][tc]=board[sr][sc];
  board[sr][sc]="";
}

function isEnemy(piece,target){
  if(!target) return false;
  return (piece===piece.toUpperCase() && target===target.toLowerCase()) ||
         (piece===piece.toLowerCase() && target===target.toUpperCase());
}

function pathClear(sr,sc,tr,tc){
  let dr=Math.sign(tr-sr);
  let dc=Math.sign(tc-sc);
  let r=sr+dr,c=sc+dc;
  while(r!=tr || c!=tc){
    if(board[r][c]!="") return false;
    r+=dr; c+=dc;
  }
  return true;
}

function isLegalMove(sr,sc,tr,tc,checkTurn=false){
  if(sr===tr && sc===tc) return false;
  let piece=board[sr][sc];
  let target=board[tr][tc];
  if(!piece) return false;
  if(checkTurn && piece!==piece.toUpperCase()) return false;
  if(target && !isEnemy(piece,target)) return false;

  let dr=tr-sr, dc=tc-sc;

  switch(piece.toLowerCase()){
    case "p":
      let dir = piece==="P"?-1:1;
      let startRow = piece==="P"?6:1;
      if(dc===0 && !target){
        if(dr===dir) return true;
        if(sr===startRow && dr===2*dir && !board[sr+dir][sc]) return true;
      }
      if(Math.abs(dc)===1 && dr===dir && isEnemy(piece,target)) return true;
      return false;

    case "r":
      if(sr===tr || sc===tc) return pathClear(sr,sc,tr,tc);
      return false;

    case "n":
      return (Math.abs(dr)===2 && Math.abs(dc)===1) ||
             (Math.abs(dr)===1 && Math.abs(dc)===2);

    case "b":
      if(Math.abs(dr)===Math.abs(dc)) return pathClear(sr,sc,tr,tc);
      return false;

    case "q":
      if(sr===tr || sc===tc || Math.abs(dr)===Math.abs(dc))
        return pathClear(sr,sc,tr,tc);
      return false;

    case "k":
      return Math.abs(dr)<=1 && Math.abs(dc)<=1;
  }
  return false;
}

function setChessDifficulty(level){
  aiDifficulty=level;
  chessStatus.textContent="AI set to "+level.toUpperCase();
}

function aiMove(){
  let moves=[];
  for(let r=0;r<8;r++){
    for(let c=0;c<8;c++){
      if(board[r][c] && board[r][c]===board[r][c].toLowerCase()){
        for(let tr=0;tr<8;tr++){
          for(let tc=0;tc<8;tc++){
            if(isLegalMove(r,c,tr,tc,false)){
              moves.push([r,c,tr,tc]);
            }
          }
        }
      }
    }
  }

  if(moves.length>0){
    let move;
    if(aiDifficulty==="easy"){
      move=moves[Math.floor(Math.random()*moves.length)];
    }else if(aiDifficulty==="medium"){
      move=moves[Math.floor(Math.random()*moves.length)];
    }else{
      let captures=moves.filter(m=>board[m[2]][m[3]]!="");
      move=captures.length>0?
           captures[Math.floor(Math.random()*captures.length)]:
           moves[Math.floor(Math.random()*moves.length)];
    }
    movePiece(...move);
  }

  whiteTurn=true;
  drawChess();
}

drawChess();
</script>

</body>
</html>


